<svg viewBox="0 0 1400 1800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .gradient-bg { fill: url(#bgGradient); }
      .card { fill: #ffffff; stroke: none; filter: drop-shadow(0 4px 12px rgba(0,0,0,0.1)); }
      .card-header { fill: url(#headerGradient); }
      .card-offline { fill: url(#offlineGradient); }
      .card-sync { fill: url(#syncGradient); }
      .card-online { fill: url(#onlineGradient); }
      .title { font-size: 28px; font-weight: 700; fill: #1a1a1a; font-family: 'Arial', sans-serif; }
      .subtitle { font-size: 16px; font-weight: 600; fill: #ffffff; font-family: 'Arial', sans-serif; }
      .text { font-size: 14px; fill: #333; font-family: 'Arial', sans-serif; }
      .text-white { font-size: 14px; fill: #ffffff; font-family: 'Arial', sans-serif; }
      .small-text { font-size: 12px; fill: #666; font-family: 'Arial', sans-serif; }
      .code-text { font-size: 11px; fill: #444; font-family: 'Courier New', monospace; }
      .badge { font-size: 13px; font-weight: 600; fill: #ffffff; font-family: 'Arial', sans-serif; }
      .emoji { font-size: 32px; }
      .step-circle { fill: url(#stepGradient); stroke: none; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.15)); }
      .step-number { font-size: 18px; font-weight: 700; fill: #ffffff; font-family: 'Arial', sans-serif; }
      .arrow-path { stroke: url(#arrowGradient); stroke-width: 3; fill: none; marker-end: url(#arrowhead-gradient); }
      .dotted-arrow { stroke: #94a3b8; stroke-width: 2; fill: none; stroke-dasharray: 5,5; marker-end: url(#arrowhead-dotted); }
      .icon-circle { fill: url(#iconGradient); stroke: none; }
      .status-badge { rx: 12; ry: 12; }
    </style>
    
    <!-- Gradients -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="offlineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="syncGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ffa751;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe259;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="onlineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0ba360;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3cba92;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="stepGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="arrowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:0.2" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:0.2" />
    </linearGradient>
    
    <marker id="arrowhead-gradient" markerWidth="12" markerHeight="12" refX="11" refY="3.5" orient="auto">
      <polygon points="0 0, 12 3.5, 0 7" fill="#667eea" />
    </marker>
    
    <marker id="arrowhead-dotted" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#94a3b8" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1800" class="gradient-bg"/>

  <!-- Main Title -->
  <text x="700" y="50" text-anchor="middle" class="title">Offline-First Architecture</text>
  <text x="700" y="75" text-anchor="middle" class="small-text" style="fill:#64748b;">Seamless Data Sync Across All Network Conditions</text>

  <!-- SECTION 1: USER ACTION (OFFLINE) -->
  <g id="section1">
    <!-- Step Number -->
    <circle cx="100" cy="140" r="24" class="step-circle"/>
    <text x="100" y="147" text-anchor="middle" class="step-number">1</text>
    
    <!-- Card -->
    <rect x="150" y="110" width="520" height="220" rx="16" class="card"/>
    <rect x="150" y="110" width="520" height="50" rx="16" class="card-offline"/>
    <rect x="150" y="135" width="520" height="25" fill="#f5576c" opacity="0.3"/>
    
    <!-- Header -->
    <text x="180" y="142" class="subtitle">ğŸ“± User Creates Expense (Offline)</text>
    
    <!-- Content -->
    <text x="180" y="190" class="text" font-weight="600">User Action:</text>
    <text x="180" y="210" class="small-text">â€¢ Amount: $50.00</text>
    <text x="180" y="230" class="small-text">â€¢ Category: Food ğŸ”</text>
    <text x="180" y="250" class="small-text">â€¢ Payment: Cash ğŸ’µ</text>
    <text x="180" y="270" class="small-text">â€¢ Description: "Grocery shopping"</text>
    
    <!-- Status Badge -->
    <rect x="180" y="290" width="100" height="28" class="status-badge" fill="#f5576c"/>
    <text x="230" y="309" text-anchor="middle" class="badge">ğŸ“µ OFFLINE</text>
    
    <!-- Icon -->
    <circle cx="620" cy="210" r="50" class="icon-circle"/>
    <text x="620" y="230" text-anchor="middle" class="emoji">ğŸ’°</text>
  </g>

  <!-- Arrow 1 -->
  <path d="M 410 330 L 410 390" class="arrow-path"/>

  <!-- SECTION 2: LOCAL DATABASE -->
  <g id="section2">
    <!-- Step Number -->
    <circle cx="100" cy="440" r="24" class="step-circle"/>
    <text x="100" y="447" text-anchor="middle" class="step-number">2</text>
    
    <!-- Card -->
    <rect x="150" y="390" width="520" height="280" rx="16" class="card"/>
    <rect x="150" y="390" width="520" height="50" rx="16" class="card-header"/>
    
    <!-- Header -->
    <text x="180" y="422" class="subtitle">ğŸ’¾ Save to Local SQLite Database</text>
    
    <!-- Content -->
    <text x="180" y="470" class="text" font-weight="600">Instant Local Storage:</text>
    
    <!-- Database Operations -->
    <rect x="180" y="485" width="460" height="160" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
    <text x="200" y="505" class="code-text" font-weight="600">INSERT INTO expenses</text>
    <text x="200" y="525" class="code-text">  id: 42 (local_id)</text>
    <text x="200" y="545" class="code-text">  amount: 50.00</text>
    <text x="200" y="565" class="code-text">  is_synced: 0 â³</text>
    <text x="200" y="585" class="code-text">  status: 'pending_sync'</text>
    
    <text x="200" y="610" class="code-text" font-weight="600">UPDATE monthly_balance</text>
    <text x="200" y="630" class="code-text">  total_balance: -50.00</text>
    
    <!-- Result -->
    <rect x="180" y="655" width="150" height="28" class="status-badge" fill="#0ba360"/>
    <text x="255" y="674" text-anchor="middle" class="badge">âœ… Saved Locally</text>
  </g>

  <!-- Arrow 2 -->
  <path d="M 410 670 L 410 730" class="arrow-path"/>

  <!-- SECTION 3: SYNC QUEUE -->
  <g id="section3">
    <!-- Step Number -->
    <circle cx="100" cy="780" r="24" class="step-circle"/>
    <text x="100" y="787" text-anchor="middle" class="step-number">3</text>
    
    <!-- Card -->
    <rect x="150" y="730" width="520" height="260" rx="16" class="card"/>
    <rect x="150" y="730" width="520" height="50" rx="16" class="card-sync"/>
    
    <!-- Header -->
    <text x="180" y="762" class="subtitle">ğŸ“‹ Add to Sync Queue</text>
    
    <!-- Content -->
    <text x="180" y="810" class="text" font-weight="600">Queue Operation:</text>
    
    <!-- Queue Details -->
    <rect x="180" y="825" width="460" height="140" rx="8" fill="#fffbeb" stroke="#fbbf24" stroke-width="1"/>
    <text x="200" y="845" class="code-text">queue_item = {</text>
    <text x="220" y="865" class="code-text">table_name: 'expense'</text>
    <text x="220" y="885" class="code-text">action: 'create'</text>
    <text x="220" y="905" class="code-text">operation_id: "expense_1703...xyz"</text>
    <text x="220" y="925" class="code-text">device_id: "ios_1703...abc"</text>
    <text x="220" y="945" class="code-text">retry_count: 0</text>
    <text x="200" y="960" class="code-text">}</text>
    
    <!-- Icon -->
    <circle cx="620" cy="870" r="50" class="icon-circle"/>
    <text x="620" y="890" text-anchor="middle" class="emoji">ğŸ“¦</text>
  </g>

  <!-- Dotted line to waiting state -->
  <path d="M 410 990 L 410 1050" class="dotted-arrow"/>
  <text x="450" y="1025" class="small-text" fill="#64748b">Waiting for connection...</text>

  <!-- SECTION 4: NETWORK RESTORED -->
  <g id="section4">
    <!-- Step Number -->
    <circle cx="100" cy="1100" r="24" class="step-circle"/>
    <text x="100" y="1107" text-anchor="middle" class="step-number">4</text>
    
    <!-- Card -->
    <rect x="150" y="1050" width="520" height="200" rx="16" class="card"/>
    <rect x="150" y="1050" width="520" height="50" rx="16" class="card-online"/>
    
    <!-- Header -->
    <text x="180" y="1082" class="subtitle">ğŸ“¶ Network Connection Restored</text>
    
    <!-- Content -->
    <text x="180" y="1130" class="text" font-weight="600">Auto-Sync Triggered:</text>
    <text x="180" y="1155" class="small-text">â€¢ App returns to foreground</text>
    <text x="180" y="1175" class="small-text">â€¢ Network status: Online âœ“</text>
    <text x="180" y="1195" class="small-text">â€¢ Processing sync queue...</text>
    
    <!-- Status Badge -->
    <rect x="180" y="1210" width="120" height="28" class="status-badge" fill="#0ba360"/>
    <text x="240" y="1229" text-anchor="middle" class="badge">ğŸ”„ SYNCING</text>
    
    <!-- Icon -->
    <circle cx="620" cy="1150" r="50" class="icon-circle"/>
    <text x="620" y="1170" text-anchor="middle" class="emoji">ğŸŒ</text>
  </g>

  <!-- Arrow 3 -->
  <path d="M 410 1250 L 410 1310" class="arrow-path"/>

  <!-- SECTION 5: BACKEND SYNC -->
  <g id="section5">
    <!-- Step Number -->
    <circle cx="100" cy="1360" r="24" class="step-circle"/>
    <text x="100" y="1367" text-anchor="middle" class="step-number">5</text>
    
    <!-- Card -->
    <rect x="150" y="1310" width="520" height="240" rx="16" class="card"/>
    <rect x="150" y="1310" width="520" height="50" rx="16" class="card-header"/>
    
    <!-- Header -->
    <text x="180" y="1342" class="subtitle">ğŸš€ Sync to Backend Server</text>
    
    <!-- Content -->
    <text x="180" y="1390" class="text" font-weight="600">API Request:</text>
    
    <!-- API Details -->
    <rect x="180" y="1405" width="460" height="120" rx="8" fill="#f0f9ff" stroke="#3b82f6" stroke-width="1"/>
    <text x="200" y="1425" class="code-text" font-weight="600">POST /expenses/add</text>
    <text x="200" y="1450" class="code-text">â†’ Create expense on server</text>
    <text x="200" y="1470" class="code-text">â†’ Get server_id: 789</text>
    <text x="200" y="1490" class="code-text">â†’ Create sync_operation record</text>
    <text x="200" y="1510" class="code-text">   device_ids: ["ios_..."]</text>
    
    <!-- Success Badge -->
    <rect x="180" y="1530" width="140" height="28" class="status-badge" fill="#10b981"/>
    <text x="250" y="1549" text-anchor="middle" class="badge">âœ… Sync Success</text>
  </g>

  <!-- Arrow 4 -->
  <path d="M 410 1550 L 410 1610" class="arrow-path"/>

  <!-- SECTION 6: UPDATE LOCAL -->
  <g id="section6">
    <!-- Step Number -->
    <circle cx="100" cy="1660" r="24" class="step-circle"/>
    <text x="100" y="1667" text-anchor="middle" class="step-number">6</text>
    
    <!-- Card -->
    <rect x="150" y="1610" width="520" height="150" rx="16" class="card"/>
    <rect x="150" y="1610" width="520" height="50" rx="16" style="fill: linear-gradient(90deg, #10b981 0%, #059669 100%);"/>
    
    <!-- Header -->
    <text x="180" y="1642" class="subtitle">ğŸ”„ Update Local Record</text>
    
    <!-- Content -->
    <rect x="180" y="1675" width="460" height="70" rx="8" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
    <text x="200" y="1695" class="code-text">UPDATE expenses</text>
    <text x="200" y="1715" class="code-text">  SET server_id = 789,</text>
    <text x="200" y="1735" class="code-text">      is_synced = 1 âœ“</text>
  </g>

  <!-- RIGHT SIDE: STATUS INDICATORS -->
  <g id="status-panel">
    <!-- Status Panel Card -->
    <rect x="730" y="110" width="600" height="1650" rx="16" class="card"/>
    <rect x="730" y="110" width="600" height="50" rx="16" class="card-header"/>
    <text x="760" y="142" class="subtitle">ğŸ“Š Sync Status Dashboard</text>
    
    <!-- Status Indicators -->
    <g id="status-synced">
      <rect x="760" y="190" width="540" height="80" rx="12" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
      <text x="790" y="220" class="emoji" style="font-size:28px;">âœ…</text>
      <text x="850" y="220" class="text" font-weight="600">Synced</text>
      <text x="850" y="240" class="small-text">Record successfully synced to server</text>
      <text x="850" y="258" class="small-text" style="fill:#10b981;">server_id: 789 | local_id: 42</text>
    </g>
    
    <g id="status-pending">
      <rect x="760" y="290" width="540" height="80" rx="12" fill="#fffbeb" stroke="#fbbf24" stroke-width="2"/>
      <text x="790" y="320" class="emoji" style="font-size:28px;">â³</text>
      <text x="850" y="320" class="text" font-weight="600">Pending Sync</text>
      <text x="850" y="340" class="small-text">Waiting for network connection</text>
      <text x="850" y="358" class="small-text" style="fill:#f59e0b;">Queued: 3 operations</text>
    </g>
    
    <g id="status-syncing">
      <rect x="760" y="390" width="540" height="80" rx="12" fill="#f0f9ff" stroke="#3b82f6" stroke-width="2"/>
      <text x="790" y="420" class="emoji" style="font-size:28px;">ğŸ”„</text>
      <text x="850" y="420" class="text" font-weight="600">Syncing</text>
      <text x="850" y="440" class="small-text">Sync in progress...</text>
      <text x="850" y="458" class="small-text" style="fill:#3b82f6;">Processing: 2 of 3 operations</text>
    </g>
    
    <g id="status-failed">
      <rect x="760" y="490" width="540" height="80" rx="12" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
      <text x="790" y="520" class="emoji" style="font-size:28px;">âŒ</text>
      <text x="850" y="520" class="text" font-weight="600">Sync Failed</text>
      <text x="850" y="540" class="small-text">Manual retry required</text>
      <text x="850" y="558" class="small-text" style="fill:#ef4444;">Retry count: 3/5 | Last error: Network timeout</text>
    </g>
    
    <!-- Key Features -->
    <text x="760" y="620" class="text" font-weight="600" style="font-size:18px;">ğŸ¯ Key Features</text>
    
    <g id="feature-1">
      <rect x="760" y="640" width="540" height="70" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
      <text x="790" y="665" class="text" font-weight="600">âš¡ Instant Operations</text>
      <text x="790" y="685" class="small-text">All CRUD operations execute locally first</text>
      <text x="790" y="700" class="small-text">Zero network wait time for user actions</text>
    </g>
    
    <g id="feature-2">
      <rect x="760" y="725" width="540" height="70" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
      <text x="790" y="750" class="text" font-weight="600">ğŸ”„ Auto Background Sync</text>
      <text x="790" y="770" class="small-text">Syncs automatically when app returns to foreground</text>
      <text x="790" y="785" class="small-text">Intelligent retry with exponential backoff</text>
    </g>
    
    <g id="feature-3">
      <rect x="760" y="810" width="540" height="70" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
      <text x="790" y="835" class="text" font-weight="600">ğŸ’¾ Persistent Storage</text>
      <text x="790" y="855" class="small-text">SQLite database survives app restarts</text>
      <text x="790" y="870" class="small-text">Dual-layer buffering prevents data loss</text>
    </g>
    
    <g id="feature-4">
      <rect x="760" y="895" width="540" height="70" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
      <text x="790" y="920" class="text" font-weight="600">ğŸ” Data Integrity</text>
      <text x="790" y="940" class="small-text">Atomic transactions ensure consistency</text>
      <text x="790" y="955" class="small-text">Cascade updates maintain balance accuracy</text>
    </g>
    
    <!-- Architecture Diagram -->
    <text x="760" y="1010" class="text" font-weight="600" style="font-size:18px;">ğŸ—ï¸ Architecture Layers</text>
    
    <g id="layer-ui">
      <rect x="760" y="1030" width="540" height="50" rx="8" fill="#ddd6fe" stroke="#7c3aed" stroke-width="2"/>
      <text x="1030" y="1061" text-anchor="middle" class="text" font-weight="600">ğŸ“± UI Layer (React Native)</text>
    </g>
    
    <path d="M 1030 1080 L 1030 1095" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-dotted)"/>
    
    <g id="layer-service">
      <rect x="760" y="1100" width="540" height="50" rx="8" fill="#fcd34d" stroke="#f59e0b" stroke-width="2"/>
      <text x="1030" y="1131" text-anchor="middle" class="text" font-weight="600">âš™ï¸ Service Layer (Business Logic)</text>
    </g>
    
    <path d="M 1030 1150 L 1030 1165" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-dotted)"/>
    
    <g id="layer-sync">
      <rect x="760" y="1170" width="540" height="50" rx="8" fill="#fed7aa" stroke="#fb923c" stroke-width="2"/>
      <text x="1030" y="1201" text-anchor="middle" class="text" font-weight="600">ğŸ”„ Sync Queue Manager</text>
    </g>
    
    <path d="M 1030 1220 L 1030 1235" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-dotted)"/>
    
    <g id="layer-database">
      <rect x="760" y="1240" width="540" height="50" rx="8" fill="#a7f3d0" stroke="#10b981" stroke-width="2"/>
      <text x="1030" y="1271" text-anchor="middle" class="text" font-weight="600">ğŸ’¾ SQLite Database</text>
    </g>
    
    <!-- Performance Metrics -->
    <text x="760" y="1340" class="text" font-weight="600" style="font-size:18px;">ğŸ“ˆ Performance Metrics</text>
    
    <g id="metric-1">
      <rect x="760" y="1360" width="260" height="90" rx="8" fill="#f0f9ff" stroke="#3b82f6" stroke-width="1"/>
      <text x="890" y="1390" text-anchor="middle" class="text" style="font-size:32px; font-weight:700; fill:#3b82f6;">&lt;10ms</text>
      <text x="890" y="1415" text-anchor="middle" class="small-text">Local Operation Time</text>
      <text x="890" y="1435" text-anchor="middle" class="small-text" style="font-size:10px;">vs 500ms+ network call</text>
    </g>
    
    <g id="metric-2">
      <rect x="1040" y="1360" width="260" height="90" rx="8" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
      <text x="1170" y="1390" text-anchor="middle" class="text" style="font-size:32px; font-weight:700; fill:#10b981;">99.9%</text>
      <text x="1170" y="1415" text-anchor="middle" class="small-text">Uptime</text>
      <text x="1170" y="1435" text-anchor="middle" class="small-text" style="font-size:10px;">Works completely offline</text>
    </g>
    
    <g id="metric-3">
      <rect x="760" y="1465" width="260" height="90" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
      <text x="890" y="1495" text-anchor="middle" class="text" style="font-size:32px; font-weight:700; fill:#f59e0b;">Unlimited</text>
      <text x="890" y="1520" text-anchor="middle" class="small-text">Offline Operations</text>
      <text x="890" y="1540" text-anchor="middle" class="small-text" style="font-size:10px;">No limits on local storage</text>
    </g>
    
    <g id="metric-4">
      <rect x="1040" y="1465" width="260" height="90" rx="8" fill="#ede9fe" stroke="#7c3aed" stroke-width="1"/>
      <text x="1170" y="1495" text-anchor="middle" class="text" style="font-size:32px; font-weight:700; fill:#7c3aed;">5x</text>
      <text x="1170" y="1520" text-anchor="middle" class="small-text">Retry Attempts</text>
      <text x="1170" y="1540" text-anchor="middle" class="small-text" style="font-size:10px;">Exponential backoff</text>
    </g>
    
    <!-- Bottom Badge -->
    <rect x="760" y="1590" width="540" height="150" rx="12" fill="url(#headerGradient)"/>
    <text x="1030" y="1630" text-anchor="middle" class="text-white" style="font-size:20px; font-weight:700;">ğŸ‰ Seamless Offline Experience</text>
    <text x="1030" y="1660" text-anchor="middle" class="text-white">Full CRUD functionality without network dependency</text>
    <text x="1030" y="1685" text-anchor="middle" class="text-white">Automatic sync when connection is restored</text>
    <text x="1030" y="1710" text-anchor="middle" class="text-white" style="font-size:12px;">Built for real-world network conditions âš¡</text>
  </g>

</svg>